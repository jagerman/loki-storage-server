From: Jason Rhinelander <jason@imaginary.ca>
Date: Thu, 18 Jul 2019 01:22:17 -0300
Subject: build static boost 1.74

storage server needs boost 1.66+
---
 CMakeLists.txt            | 1 +
 common/CMakeLists.txt     | 5 +----
 crypto/CMakeLists.txt     | 4 +---
 httpserver/CMakeLists.txt | 8 +-------
 pow/CMakeLists.txt        | 8 +-------
 storage/CMakeLists.txt    | 8 +-------
 unit_test/CMakeLists.txt  | 9 +--------
 7 files changed, 7 insertions(+), 36 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index 24767b3..ed80962 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -19,6 +19,7 @@ if (INTEGRATION_TEST)
     add_definitions(-DINTEGRATION_TEST)
 endif()
 
+set(Boost_INCLUDE_DIRS "${CMAKE_SOURCE_DIR}/boost/include")
 
 if (DISABLE_SNODE_SIGNATURE)
     add_definitions(-DDISABLE_SNODE_SIGNATURE)
diff --git a/common/CMakeLists.txt b/common/CMakeLists.txt
index 115ea47..e6b4373 100644
--- a/common/CMakeLists.txt
+++ b/common/CMakeLists.txt
@@ -7,10 +7,7 @@ add_library(common STATIC
 )
 
 
-find_package(Boost
-    REQUIRED
-    filesystem
-)
+set(Boost_LIBRARIES "${CMAKE_SOURCE_DIR}/boost/lib/libboost_filesystem.a;${CMAKE_SOURCE_DIR}/boost/lib/libboost_system.a")
 
 set_property(TARGET common PROPERTY CXX_STANDARD 17)
 set_property(TARGET common PROPERTY CXX_STANDARD_REQUIRED TRUE)
diff --git a/crypto/CMakeLists.txt b/crypto/CMakeLists.txt
index 45cc507..c05baec 100644
--- a/crypto/CMakeLists.txt
+++ b/crypto/CMakeLists.txt
@@ -41,9 +41,7 @@ loki_add_subdirectory(../utils utils)
 
 target_link_libraries(crypto PUBLIC utils)
 
-if (NOT Boost_FOUND)
-    find_package(Boost REQUIRED system filesystem)
-endif()
+set(Boost_LIBRARIES "${CMAKE_SOURCE_DIR}/boost/lib/libboost_filesystem.a;${CMAKE_SOURCE_DIR}/boost/lib/libboost_system.a")
 
 target_include_directories(crypto PRIVATE ${Boost_INCLUDE_DIRS})
 target_link_libraries(crypto PRIVATE ${Boost_LIBRARIES})
diff --git a/httpserver/CMakeLists.txt b/httpserver/CMakeLists.txt
index b86f8bf..440ad5b 100644
--- a/httpserver/CMakeLists.txt
+++ b/httpserver/CMakeLists.txt
@@ -32,13 +32,7 @@ loki_add_subdirectory(../pow pow)
 loki_add_subdirectory(../crypto crypto)
 find_package(OpenSSL REQUIRED)
 
-find_package(Boost
-    REQUIRED
-    thread
-    system
-    filesystem
-    program_options
-)
+set(Boost_LIBRARIES "${CMAKE_SOURCE_DIR}/boost/lib/libboost_filesystem.a;${CMAKE_SOURCE_DIR}/boost/lib/libboost_system.a;${CMAKE_SOURCE_DIR}/boost/lib/libboost_thread.a;-lpthread;${CMAKE_SOURCE_DIR}/boost/lib/libboost_program_options.a")
 
 # TODO: enable more warnings!
 target_compile_options(httpserver_lib PRIVATE -Werror=return-type)
diff --git a/pow/CMakeLists.txt b/pow/CMakeLists.txt
index f919ad0..2dce01f 100644
--- a/pow/CMakeLists.txt
+++ b/pow/CMakeLists.txt
@@ -16,13 +16,7 @@ target_include_directories(pow
     ${CMAKE_CURRENT_LIST_DIR}/include
 )
 
-if(NOT Boost_FOUND)
-    find_package(Boost
-        REQUIRED
-        system
-        filesystem
-    )
-endif()
+set(Boost_LIBRARIES "${CMAKE_SOURCE_DIR}/boost/lib/libboost_filesystem.a;${CMAKE_SOURCE_DIR}/boost/lib/libboost_system.a")
 
 target_include_directories(pow PRIVATE ${Boost_INCLUDE_DIRS})
 target_link_libraries(pow PRIVATE ${Boost_LIBRARIES})
diff --git a/storage/CMakeLists.txt b/storage/CMakeLists.txt
index b29440d..df2a9e6 100644
--- a/storage/CMakeLists.txt
+++ b/storage/CMakeLists.txt
@@ -22,13 +22,7 @@ find_library(SQLITE3_LIBRARY sqlite3)
 target_link_libraries(storage PRIVATE ${SQLITE3_LIBRARY})
 
 
-if(NOT Boost_FOUND)
-    find_package(Boost
-        REQUIRED
-        system
-        filesystem
-    )
-endif()
+set(Boost_LIBRARIES "${CMAKE_SOURCE_DIR}/boost/lib/libboost_filesystem.a;${CMAKE_SOURCE_DIR}/boost/lib/libboost_system.a")
 
 target_include_directories(storage PRIVATE ${Boost_INCLUDE_DIRS})
 target_link_libraries(storage PRIVATE ${Boost_LIBRARIES})
diff --git a/unit_test/CMakeLists.txt b/unit_test/CMakeLists.txt
index 504b089..858ba76 100644
--- a/unit_test/CMakeLists.txt
+++ b/unit_test/CMakeLists.txt
@@ -21,14 +21,7 @@ loki_add_subdirectory(../httpserver httpserver)
 
 target_link_libraries(Test PRIVATE common storage pow utils crypto httpserver_lib)
 
-# boost
-find_package(Boost REQUIRED
-    system
-    filesystem
-    chrono
-    thread
-    unit_test_framework
-)
+set(Boost_LIBRARIES "${CMAKE_SOURCE_DIR}/boost/lib/libboost_filesystem.a;${CMAKE_SOURCE_DIR}/boost/lib/libboost_system.a;${CMAKE_SOURCE_DIR}/boost/lib/libboost_thread.a;-lpthread;${CMAKE_SOURCE_DIR}/boost/lib/libboost_unit_test_framework.a")
 
 set_property(TARGET Test PROPERTY CXX_STANDARD 17)
 set_property(TARGET Test PROPERTY CXX_STANDARD_REQUIRED TRUE)
