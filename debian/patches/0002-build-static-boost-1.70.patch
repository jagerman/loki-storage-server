From: Jason Rhinelander <jason@imaginary.ca>
Date: Thu, 18 Jul 2019 01:22:17 -0300
Subject: build static boost 1.70

storage server needs boost 1.66+
---
 CMakeLists.txt            | 1 +
 common/CMakeLists.txt     | 5 +----
 crypto/CMakeLists.txt     | 4 +---
 httpserver/CMakeLists.txt | 8 +-------
 pow/CMakeLists.txt        | 8 +-------
 storage/CMakeLists.txt    | 8 +-------
 unit_test/CMakeLists.txt  | 9 +--------
 7 files changed, 7 insertions(+), 36 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index 0c62c49..1691be4 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -19,6 +19,7 @@ if (INTEGRATION_TEST)
     add_definitions(-DINTEGRATION_TEST)
 endif()
 
+set(Boost_INCLUDE_DIRS "${CMAKE_SOURCE_DIR}/boost/include")
 
 if (DISABLE_SNODE_SIGNATURE)
     add_definitions(-DDISABLE_SNODE_SIGNATURE)
diff --git a/common/CMakeLists.txt b/common/CMakeLists.txt
index 9123362..71d9c1b 100644
--- a/common/CMakeLists.txt
+++ b/common/CMakeLists.txt
@@ -6,10 +6,7 @@ add_library(common STATIC
     src/loki_logger.cpp
 )
 
-find_package(Boost
-    REQUIRED
-    filesystem
-)
+set(Boost_LIBRARIES "${CMAKE_SOURCE_DIR}/boost/lib/libboost_filesystem.a;${CMAKE_SOURCE_DIR}/boost/lib/libboost_system.a")
 
 set_property(TARGET common PROPERTY CXX_STANDARD 14)
 
diff --git a/crypto/CMakeLists.txt b/crypto/CMakeLists.txt
index bc8d4e2..a4e7667 100644
--- a/crypto/CMakeLists.txt
+++ b/crypto/CMakeLists.txt
@@ -38,9 +38,7 @@ find_library(LOKI_EPEE epee PATHS /usr/lib/${CMAKE_LIBRARY_ARCHITECTURE}/loki-co
 target_link_libraries(crypto INTERFACE ${LOKI_CNCRYPTO})
 target_link_libraries(crypto INTERFACE ${LOKI_EPEE})
 
-if (NOT Boost_FOUND)
-    find_package(Boost REQUIRED system filesystem)
-endif()
+set(Boost_LIBRARIES "${CMAKE_SOURCE_DIR}/boost/lib/libboost_filesystem.a;${CMAKE_SOURCE_DIR}/boost/lib/libboost_system.a")
 
 target_include_directories(crypto PRIVATE ${Boost_INCLUDE_DIRS})
 target_link_libraries(crypto PRIVATE ${Boost_LIBRARIES})
diff --git a/httpserver/CMakeLists.txt b/httpserver/CMakeLists.txt
index 7737414..ab8b7b0 100644
--- a/httpserver/CMakeLists.txt
+++ b/httpserver/CMakeLists.txt
@@ -40,13 +40,7 @@ loki_add_subdirectory(../pow pow)
 loki_add_subdirectory(../crypto crypto)
 find_package(OpenSSL REQUIRED)
 
-find_package(Boost
-    REQUIRED
-    thread
-    system
-    filesystem
-    program_options
-)
+set(Boost_LIBRARIES "${CMAKE_SOURCE_DIR}/boost/lib/libboost_filesystem.a;${CMAKE_SOURCE_DIR}/boost/lib/libboost_system.a;${CMAKE_SOURCE_DIR}/boost/lib/libboost_thread.a;-lpthread;${CMAKE_SOURCE_DIR}/boost/lib/libboost_program_options.a;${CMAKE_SOURCE_DIR}/boost/lib/libboost_chrono.a;${CMAKE_SOURCE_DIR}/boost/lib/libboost_date_time.a;${CMAKE_SOURCE_DIR}/boost/lib/libboost_atomic.a")
 
 target_link_libraries(httpserver_lib PUBLIC common)
 target_link_libraries(httpserver_lib PUBLIC OpenSSL::SSL OpenSSL::Crypto)
diff --git a/pow/CMakeLists.txt b/pow/CMakeLists.txt
index 127b817..136c5a5 100644
--- a/pow/CMakeLists.txt
+++ b/pow/CMakeLists.txt
@@ -17,13 +17,7 @@ target_include_directories(pow
     ${CMAKE_CURRENT_LIST_DIR}/include
 )
 
-if(NOT Boost_FOUND)
-    find_package(Boost
-        REQUIRED
-        system
-        filesystem
-    )
-endif()
+set(Boost_LIBRARIES "${CMAKE_SOURCE_DIR}/boost/lib/libboost_filesystem.a;${CMAKE_SOURCE_DIR}/boost/lib/libboost_system.a")
 
 target_include_directories(pow PRIVATE ${Boost_INCLUDE_DIRS})
 target_link_libraries(pow PRIVATE ${Boost_LIBRARIES})
diff --git a/storage/CMakeLists.txt b/storage/CMakeLists.txt
index ee7c7a1..f7b534b 100644
--- a/storage/CMakeLists.txt
+++ b/storage/CMakeLists.txt
@@ -25,13 +25,7 @@ find_library(SQLITE3_LIBRARY sqlite3)
 target_link_libraries(storage PRIVATE ${SQLITE3_LIBRARY})
 
 
-if(NOT Boost_FOUND)
-    find_package(Boost
-        REQUIRED
-        system
-        filesystem
-    )
-endif()
+set(Boost_LIBRARIES "${CMAKE_SOURCE_DIR}/boost/lib/libboost_filesystem.a;${CMAKE_SOURCE_DIR}/boost/lib/libboost_system.a")
 
 target_include_directories(storage PRIVATE ${Boost_INCLUDE_DIRS})
 target_link_libraries(storage PRIVATE ${Boost_LIBRARIES})
diff --git a/unit_test/CMakeLists.txt b/unit_test/CMakeLists.txt
index 0cefe8c..7cabd72 100644
--- a/unit_test/CMakeLists.txt
+++ b/unit_test/CMakeLists.txt
@@ -21,14 +21,7 @@ loki_add_subdirectory(../httpserver httpserver)
 
 target_link_libraries(Test PRIVATE common storage pow utils crypto httpserver_lib)
 
-# boost
-find_package(Boost REQUIRED
-    system
-    filesystem
-    chrono
-    thread
-    unit_test_framework
-)
+set(Boost_LIBRARIES "${CMAKE_SOURCE_DIR}/boost/lib/libboost_filesystem.a;${CMAKE_SOURCE_DIR}/boost/lib/libboost_system.a;${CMAKE_SOURCE_DIR}/boost/lib/libboost_chrono.a;${CMAKE_SOURCE_DIR}/boost/lib/libboost_thread.a;-lpthread;${CMAKE_SOURCE_DIR}/boost/lib/libboost_unit_test_framework.a;${CMAKE_SOURCE_DIR}/boost/lib/libboost_date_time.a;${CMAKE_SOURCE_DIR}/boost/lib/libboost_atomic.a")
 
 set_property(TARGET Test PROPERTY CXX_STANDARD 14)
 
